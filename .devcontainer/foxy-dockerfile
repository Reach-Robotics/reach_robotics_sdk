# ROS 2 Docker Container
ARG ROS_DISTRO=foxy
FROM osrf/ros:$ROS_DISTRO-desktop

RUN apt-get update
RUN apt-get install -y git
RUN apt-get install -y vim
RUN apt-get install -y ros-$ROS_DISTRO-turtlesim
RUN apt-get install -y python3-pip zip
RUN apt install dos2unix -y

RUN apt install ros-$ROS_DISTRO-xacro 
RUN apt install ros-$ROS_DISTRO-joint-state-publisher
RUN apt install ros-$ROS_DISTRO-joint-state-publisher-gui

RUN python3 -m pip install --upgrade pip

ARG PYREQ_TXT
ARG PYREQ_SPHINX_TXT
ARG PYREQ_RS_PROTOCOL

COPY $PYREQ_TXT /requirements.txt
COPY $PYREQ_SPHINX_TXT /sphinx_requirements.txt
COPY $PYREQ_RS_PROTOCOL /rs_protocol

RUN python3 -m pip install --timeout=1000 -r /sphinx_requirements.txt
RUN python3 -m pip install --timeout=1000 -r /requirements.txt

# RUN python3 -m pip install /rs_protocol

RUN ln -sf /bin/bash /bin/sh

RUN echo "source /opt/ros/$ROS_DISTRO/setup.bash" >> ~/.bashrc
RUN source ~/.bashrc
